<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hetzner-Web åˆå¹¶ä¸éƒ¨ç½²æ•™ç¨‹</title>
  <style>
    body { font-family: -apple-system, "PingFang SC", "Microsoft YaHei", Arial, sans-serif; line-height: 1.75; color:#222; }
    h1,h2,h3 { margin: 1.2em 0 0.6em; }
    p { margin: 0.6em 0; }
    code, pre { background:#f6f6f9; border:1px solid #eee; border-radius:6px; }
    pre { padding:12px; overflow:auto; }
    code { padding:2px 6px; }
    .muted { color:#666; }
    .note { background:#f9fbff; border:1px solid #e6efff; padding:10px 12px; border-radius:8px; }
    ul { margin: 0.4em 0 0.8em 1.2em; }
  </style>
</head>
<body>
  <h1>Hetzner-Web åˆå¹¶ä¸éƒ¨ç½²æ•™ç¨‹</h1>
  <p class="muted">æœ¬æ•™ç¨‹è®°å½•å¦‚ä½•æŠŠ Web é¢æ¿ä¸ Automation åˆå¹¶åˆ°ä¸€ä¸ªä»“åº“ï¼Œå¹¶å®Œæˆéƒ¨ç½²ã€éªŒè¯ä¸ç»´æŠ¤ã€‚</p>

  <h2>1. èƒŒæ™¯ä¸ç›®æ ‡</h2>
  <p>å°† Hetzner-Automation åˆå¹¶åˆ° Hetzner-Webï¼ˆ<code>automation/</code> ç›®å½•ï¼‰ï¼Œå®ç°ç»Ÿä¸€ç»´æŠ¤ã€‚</p>
  <ul>
    <li>Web é¢æ¿ç»Ÿä¸€å±•ç¤ºæµé‡ä¸çŠ¶æ€</li>
    <li>Telegram æ¥æ”¶é€šçŸ¥å¹¶å¯æ‰§è¡Œç®¡ç†å‘½ä»¤</li>
    <li>è¾¾é‡è‡ªåŠ¨åˆ æœºã€å¿«ç…§é‡å»ºã€è‡ªåŠ¨æ¢å¤ DNS</li>
  </ul>

  <h2>2. ä»“åº“ç»“æ„</h2>
  <pre><code>Hetzner-Web/
â”œâ”€ automation/       # è‡ªåŠ¨åŒ–ç›‘æ§ + Telegram
â”œâ”€ static/           # Web å‰ç«¯
â”œâ”€ main.py           # Web + åå°è°ƒåº¦
â””â”€ docker-compose.yml
</code></pre>

  <h2>3. ä¸€é”®å®‰è£…</h2>
  <h3>3.1 Web é¢æ¿</h3>
  <pre><code>curl -fsSL https://raw.githubusercontent.com/liuweiqiang0523/Hetzner-Web/main/scripts/install-docker.sh | bash</code></pre>

  <h3>3.2 Automation ç›‘æ§</h3>
  <pre><code>curl -fsSL https://raw.githubusercontent.com/liuweiqiang0523/Hetzner-Web/main/automation/install_hetzner_monitor.sh | sudo bash</code></pre>

  <h2>4. æ ¸å¿ƒé…ç½®ï¼ˆconfig.yamlï¼‰</h2>
  <pre><code>hetzner:
  api_token: "YOUR_HETZNER_API_TOKEN"

traffic:
  limit_gb: 18432
  check_interval: 5
  exceed_action: "rebuild"

telegram:
  enabled: true
  bot_token: "YOUR_TELEGRAM_BOT_TOKEN"
  chat_id: "YOUR_CHAT_ID"
  notify_levels: [10,20,30,40,50,60,70,80,90,95,100]

cloudflare:
  api_token: "YOUR_CF_TOKEN"
  zone_id: "YOUR_ZONE_ID"
  record_map:
    "SERVER_ID_1": "server-1.example.com"
    "SERVER_ID_2": "server-2.example.com"

rebuild:
  snapshot_id_map:
    "SERVER_ID_1": "SNAPSHOT_ID_1"
    "SERVER_ID_2": "SNAPSHOT_ID_2"
  fallback_template:
    server_type: "cx43"
    location: "nbg1"
    ssh_keys: []
</code></pre>

  <h2>5. Telegram å‘½ä»¤ï¼ˆæ•™ç¨‹é£æ ¼æ¸…å•ï¼‰</h2>
  <h3>5.1 æŸ¥è¯¢ç±»</h3>
  <pre><code>/list
/status
/traffic ID
/today ID
/report
/reportstatus
/reportreset
/dnstest ID
/dnscheck ID
</code></pre>

  <h3>5.2 æ§åˆ¶ç±»</h3>
  <pre><code>/startserver &lt;ID&gt;
/stopserver &lt;ID&gt;
/reboot &lt;ID&gt;
/delete &lt;ID&gt; confirm
/rebuild &lt;ID&gt;
</code></pre>

  <h3>5.3 å¿«ç…§ç®¡ç†</h3>
  <pre><code>/snapshots
/createsnapshot &lt;ID&gt;
/createfromsnapshot &lt;SNAP_ID&gt;
/createfromsnapshots
</code></pre>

  <h3>5.4 å®šæ—¶ä»»åŠ¡</h3>
  <pre><code>/scheduleon
/scheduleoff
/schedulestatus
/scheduleset delete=23:50,01:00 create=08:00,09:00
</code></pre>

  <h3>5.5 DNS</h3>
  <pre><code>/dnsync</code></pre>

  <h2>6. Web é¢æ¿ä¼˜åŒ–è¦ç‚¹</h2>
  <ul>
    <li>ç´«è‰²ä¸»é¢˜ + æ—¥/å¤œæ¨¡å¼</li>
    <li>æ€»è§ˆä¸æ§åˆ¶æŒ‰é’®å¯¹é½ä¼˜åŒ–</li>
    <li>æ¯æ—¥æµé‡æŸ±çŠ¶å›¾ï¼šæŒ‰å¤©åˆ†ç»„ã€æŒ‰æœåŠ¡å™¨æ˜¾ç¤ºå‡º/å…¥ç«™</li>
  </ul>

  <h2>7. æ•°æ®ä¸æ˜¾ç¤ºçš„æ’æŸ¥</h2>
  <div class="note">
    <p><strong>ç°è±¡ï¼š</strong>æ€»è§ˆå’Œå›¾è¡¨éƒ½æ˜¯ 0ã€‚</p>
    <p><strong>åŸå› ï¼š</strong>é¦–æ¬¡å¯åŠ¨ç¼ºå°‘å†å²å¿«ç…§ã€‚</p>
    <p><strong>è§£å†³ï¼š</strong>ç³»ç»Ÿå·²å¢åŠ åå°å¿«ç…§å¾ªç¯ï¼ŒæŒ‰ <code>traffic.check_interval</code> è®°å½•æ•°æ®ï¼Œç­‰å¾… 1ï½2 ä¸ªå‘¨æœŸååˆ·æ–°å³å¯ã€‚</p>
  </div>

  <h2>8. æ›´æ–°ä¸é‡å»º</h2>
  <pre><code>cd /opt/hetzner-web
git pull
docker compose up -d --build
</code></pre>

  <h2>9. æ—§ä»“åº“å¤„ç†å»ºè®®</h2>
  <p>å»ºè®®å…ˆå°† <code>Hetzner-Automation</code> è®¾ç½®ä¸ºç§æœ‰ï¼Œç¡®è®¤æ— ä¾èµ–åå†åˆ é™¤ã€‚</p>

  <hr />
  <p class="muted">æç¤ºï¼šæ­¤æ§åˆ¶å°ä½¿ç”¨ Basic Authï¼Œå»ºè®®é€šè¿‡ HTTPS è®¿é—®ã€‚| build 20260116-01 By__22å·ä»”StringerğŸ«§</p>
</body>
</html>
